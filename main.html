<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>M·ªôt l√° th∆∞ cho Emüíå</title>
  <style>
    .timer {
      font-size: 120%;
      line-height: 1.0;
      margin: 1em 0;
    }

    .timer b {
      color: rgb(253, 99, 125);
    }
  </style>
  <link type="text/css" rel="stylesheet" href="./css/default.css">
  <script type="text/javascript" src="./js/jquery.js"></script>
  <script type="text/javascript" src="./js/jscex.js"></script>
  <script type="text/javascript" src="./js/jscex-parser.js"></script>
  <script type="text/javascript" src="./js/jscex-jit.js"></script>
  <script type="text/javascript" src="./js/jscex-builderbase.js"></script>
  <script type="text/javascript" src="./js/jscex-async.js"></script>
  <script type="text/javascript" src="./js/jscex-async-powerpack.js"></script>
  <script type="text/javascript" src="./js/functions.js" charset="utf-8"></script>
  <script type="text/javascript" src="./js/love.js" charset="utf-8"></script>
</head>

<body>
  <! - Ph√°t nh·∫°c t·∫°i ƒë√¢y ->
    <audio id='audio' src='love.mp3' loop> </audio>
    <button id='status' onclick='triggerBgMusic ()'> N√∫t ph√°t </button>
    <br>
    <span class="say"> üì±Nh·ªõ vu·ªët m√†n h√¨nh sang tr√°i </span>
    <br>
    <span class="say"> üéÅEm ∆°i, Anh c√≥ m·ªôt m√≥n qu√† nh·ªè </span>
    <br>
    <span class="say"> H√£y ƒë√≥n ch·ªù xem n√≥ l√† g√¨ nh√© üòä </span>
    <! - B∆∞·ªõc nh·∫£y th·ªùi gian ->
      <meta http-equiv="refresh" content="69; url = tim.html">
      <! - M√°y ƒë√°nh ch·ªØ ->
        <div id="main">
          <div id="error"> K√≠nh g·ª≠i, tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng th·ªÉ hi·ªÉn th·ªã tr√¨nh duy·ªát n√†y, vui l√≤ng thay ƒë·ªïi sang
            tr√¨nh duy·ªát Google, Firefox ho·∫∑c 360 c·ªßa c·ªïng m√°y t√≠nh. muah! („Å• Ôø£ 3Ôø£) „Å•! </div>
          <div id="wrap">
            <div id="text">
              <div id="code">
                <span class="say"> G·ª≠i Em ng∆∞·ªùi tr∆∞·ªõc m√†n h√¨nh! üíû </span> <br>
                <span class="say"> </span> Em c∆∞·ªõp tim anh r·ªìi üò¢. B·∫Øt ƒë·ªÅn em ƒë·∫•y<br>
                <span class="say"> </span> Em b·ªõt xinh v√† cute l·∫°i kh√¥ng anh ch·∫øt m·∫•t th√¥i ü§£<br>
                <span class="say"> </span> C√¥ g√°i nh·ªè th·∫≠t d·ªÖ th∆∞∆°ng,l√†m ny anh nh√© baby<br>
                <span class="say"> </span> Y√™u em y√™u em nh·∫•t tr√™n ƒë·ªùi üòòüòòüòò<br>
                <span class="say"> </span> Gia ƒë√¨nh nh·ªè n√†y s·∫Ω th·∫≠t h·∫°nh ph√∫c n·∫øu c√≥ ch√∫ng ta üíï<br>
                <span class="say"> </span> <br>
                <span class="say"> 2/6/2023 ‚ù§Ô∏è </span>
              </div>
            </div>
            <! - Th√¥ng tin ƒë·∫øm ng∆∞·ª£c ->
              <div id="clock-box">
                <span class="STYLE1"> <span class="STYLE1">üíïTh·ªùi gian t∆∞∆°ng t∆∞ emüíü</span>
                  <div class="timer">
                    <b id="d"></b> Days <b id="h"></b> Hours <b id="m"></b> Minutes <b id="s"></b> Seconds
                  </div>
              </div>
              <canvas id="canvas" width="1100" height="680"></canvas>
          </div>

        </div>

        <script>
          (function () {
            var canvas = $('#canvas');

            if (!canvas[0].getContext) {
              $("#error").show();
              return false;
            }

            var width = canvas.width();
            var height = canvas.height();

            canvas.attr("width", width);
            canvas.attr("height", height);

            var opts = {
              seed: {
                x: width / 2 - 20,
                color: "rgb(190, 26, 37)",
                scale: 2
              },
              branch: [
                [535, 680, 570, 250, 500, 200, 30, 100, [
                  [540, 500, 455, 417, 340, 400, 13, 100, [
                    [450, 435, 434, 430, 394, 395, 2, 40]
                  ]],
                  [550, 445, 600, 356, 680, 345, 12, 100, [
                    [578, 400, 648, 409, 661, 426, 3, 80]
                  ]],
                  [539, 281, 537, 248, 534, 217, 3, 40],
                  [546, 397, 413, 247, 328, 244, 9, 80, [
                    [427, 286, 383, 253, 371, 205, 2, 40],
                    [498, 345, 435, 315, 395, 330, 4, 60]
                  ]],
                  [546, 357, 608, 252, 678, 221, 6, 100, [
                    [590, 293, 646, 277, 648, 271, 2, 80]
                  ]]
                ]]
              ],
              bloom: {
                num: 700,
                width: 1080,
                height: 650,
              },
              footer: {
                width: 1200,
                height: 5,
                speed: 10,
              }
            }

            var tree = new Tree(canvas[0], width, height, opts);
            var seed = tree.seed;
            var foot = tree.footer;
            var hold = 1;

            canvas.click(function (e) {
              var offset = canvas.offset(),
                x, y;
              x = e.pageX - offset.left;
              y = e.pageY - offset.top;
              if (seed.hover(x, y)) {
                hold = 0;
                canvas.unbind("click");
                canvas.unbind("mousemove");
                canvas.removeClass('hand');
              }
            }).mousemove(function (e) {
              var offset = canvas.offset(),
                x, y;
              x = e.pageX - offset.left;
              y = e.pageY - offset.top;
              canvas.toggleClass('hand', seed.hover(x, y));
            });

            var seedAnimate = eval(Jscex.compile("async", function () {
              seed.draw();
              while (hold) {
                $await(Jscex.Async.sleep(10));
              }
              while (seed.canScale()) {
                seed.scale(0.95);
                $await(Jscex.Async.sleep(10));
              }
              while (seed.canMove()) {
                seed.move(0, 2);
                foot.draw();
                $await(Jscex.Async.sleep(10));
              }
            }));

            var growAnimate = eval(Jscex.compile("async", function () {
              do {
                tree.grow();
                $await(Jscex.Async.sleep(10));
              } while (tree.canGrow());
            }));

            var flowAnimate = eval(Jscex.compile("async", function () {
              do {
                tree.flower(2);
                $await(Jscex.Async.sleep(10));
              } while (tree.canFlower());
            }));

            var moveAnimate = eval(Jscex.compile("async", function () {
              tree.snapshot("p1", 240, 0, 610, 680);
              while (tree.move("p1", 500, 0)) {
                foot.draw();
                $await(Jscex.Async.sleep(10));
              }
              foot.draw();
              tree.snapshot("p2", 500, 0, 610, 680);

              // S·∫Ω c√≥ hi·ªán t∆∞·ª£ng ch·∫≠p ch·ªùn n·∫øu kh√¥ng c·ªë √Ω l√†m nh∆∞ v·∫≠y, (Ôºû Ôπè Ôºú)
              canvas.parent().css("background", "url(" + tree.toDataURL('image/png') + ")");
              canvas.css("background", "#ffe");
              $await(Jscex.Async.sleep(300));
              canvas.css("background", "none");
            }));

            var jumpAnimate = eval(Jscex.compile("async", function () {
              var ctx = tree.ctx;
              while (true) {
                tree.ctx.clearRect(0, 0, width, height);
                tree.jump();
                foot.draw();
                $await(Jscex.Async.sleep(50));
              }
            }));

            var textAnimate = eval(Jscex.compile("async", function () {
              var together = new Date();
              together.setFullYear(2023, 1, 15);
              together.setHours(12);
              together.setMinutes(0);
              together.setSeconds(0);
              together.setMilliseconds(0);

              $("#code").show().typewriter();
              $("#clock-box").fadeIn(500);
              while (true) {
                timeElapse(together);
                $await(Jscex.Async.sleep(1000));
              }
            }));

            var runAsync = eval(Jscex.compile("async", function () {
              $await(seedAnimate());
              $await(growAnimate());
              $await(flowAnimate());
              $await(moveAnimate());

              textAnimate().start();

              $await(jumpAnimate());
            }));

            runAsync().start();
          })();

          // Thay th·∫ø th·ªùi gian Js
          function timer() {
            window.setTimeout("show_date_time()", 1000);
            var start = new Date("2023-6-2 0:00:00").getTime(); // 2015.7.2
            var t = new Date().getTime() - start;
            var h = ~~(t / 1000 / 60 / 60 % 24);
            if (h < 10) {
              h = "0" + h;
            }
            var m = ~~(t / 1000 / 60 % 60);
            if (m < 10) {
              m = "0" + m;
            }
            var s = ~~(t / 1000 % 60);
            if (s < 10) {
              s = "0" + s;
            }
            document.getElementById('d').innerHTML = ~~(t / 1000 / 60 / 60 / 24);
            document.getElementById('h').innerHTML = h;
            document.getElementById('m').innerHTML = m;
            document.getElementById('s').innerHTML = s;
          }
          timer();
          setInterval(timer, 1000);


          // ---------- Kh·ªüi t·∫°o trang nh·∫°c n·ªÅn ------------ ƒê∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ t·ª± ƒë·ªông ph√°t c·ªßa safari v√† Chrome
          // Gi·∫£i ph√°p ƒë·∫øn t·ª´ https://blog.csdn.net/joyce_lcy/article/details/79347383?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control&dist_request_id=&depthource_1-utist_request_riblevantsource=dist_distth_1. none -task-blog-BlogCommendFromMachineLearnPai2-2.control  var audio = document.getElementById('audio');
          if (sessionStorage.bgmusic == 'pause') {
            playBgMusic(false);
          } else {
            playBgMusic(true);
            // ---------- X·ª≠ l√Ω t·ª± ƒë·ªông ph√°t ------------
            // - T·∫°o tr√¨nh gi√°m s√°t trang, ƒë·ª£i trang WeChat t·∫£i v√† k√≠ch ho·∫°t ph√°t l·∫°i √¢m thanh
            document.addEventListener('DOMContentLoaded', function () {
              function audioAutoPlay() {
                playBgMusic(true);
                document.addEventListener("WeixinJSBridgeReady", function () {
                  playBgMusic(true);
                }, false);
              }
              audioAutoPlay();
            });
            // - T·∫°o m√†n h√¨nh c·∫£m ·ª©ng, khi tr√¨nh duy·ªát m·ªü trang, ch·∫°m v√†o m√†n h√¨nh ƒë·ªÉ k√≠ch ho·∫°t s·ª± ki·ªán v√† th·ª±c hi·ªán ph√°t l·∫°i √¢m thanh
            function audioAutoPlay() {
              playBgMusic(true);
              document.removeEventListener('touchstart', audioAutoPlay);
            }
            document.addEventListener('touchstart', audioAutoPlay);
          }
          // ---------- Quy tr√¨nh k√≠ch ho·∫°t trang ------------
          var hiddenProperty = 'hidden' in document ? 'hidden' :
            'webkitHidden' in document ? 'webkitHidden' :
              'mozHidden' in document ? 'mozHidden' :
                null;
          var visibilityChangeEvent = hiddenProperty.replace(/hidden/i, 'visibilitychange');
          var onVisibilityChange = function () {
            if (!document[hiddenProperty]) {
              if (!sessionStorage.bgmusic || sessionStorage.bgmusic == 'play') {
                audio.play();
              }
            } else {
              audio.pause();
            }
          }
          document.addEventListener(visibilityChangeEvent, onVisibilityChange);
          // --------- C√¥ng t·∫Øc nh·∫°c n·ªÅn ----------
          function triggerBgMusic() {
            if (!sessionStorage.bgmusic || sessionStorage.bgmusic == 'play') {
              playBgMusic(false);
            } else {
              playBgMusic(true);
            }
          }
          // --------- Ph√°t nh·∫°c v√† t·∫°m d·ª´ng ----------
          function playBgMusic(val) {
            if (val) {
              audio.play();
              sessionStorage.bgmusic = 'play';
              document.getElementById('status').innerHTML = 'Music ~ Stop üà≤';
            } else {
              audio.pause();
              sessionStorage.bgmusic = 'pause';
              document.getElementById('status').innerHTML = '√Çm nh·∫°c ~ Walk up üà∂';
            }
          }
        </script>
</body>

</html>
